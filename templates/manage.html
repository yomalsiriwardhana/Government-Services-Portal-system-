<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Manage Services - Citizen Portal</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="manage-container">
        <header class="manage-header">
            <h1>Service Management</h1>
            <div class="header-actions">
                <a href="/admin" class="btn btn-secondary">← Back to Dashboard</a>
                <button id="add-service-btn" class="btn btn-primary">+ Add New Service</button>
            </div>
        </header>
        
        <div class="manage-content">
            <!-- Service List Section -->
            <div class="section">
                <div class="section-header">
                    <h2>Existing Services</h2>
                    <div class="search-controls">
                        <input type="text" id="search-input" placeholder="Search services..." />
                        <select id="filter-select">
                            <option value="">All Services</option>
                            <option value="ministry_education">Education</option>
                            <option value="ministry_health">Health</option>
                            <option value="ministry_transport">Transport</option>
                        </select>
                    </div>
                </div>
                
                <div id="services-grid" class="services-grid">
                    <div class="loading">Loading services...</div>
                </div>
            </div>
        </div>
        
        <!-- Service Edit Modal -->
        <div id="service-modal" class="modal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h3 id="modal-title">Add New Service</h3>
                    <span class="close">&times;</span>
                </div>
                
                <form id="service-form">
                    <input type="hidden" id="service-id" name="id">
                    
                    <div class="form-section">
                        <h4>Basic Information</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="service-id-input">Service ID *</label>
                                <input type="text" id="service-id-input" name="service_id" required 
                                       placeholder="e.g., ministry_example" pattern="[a-z0-9_]+">
                                <small>Lowercase letters, numbers, and underscores only</small>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name-en">Service Name (English) *</label>
                                <input type="text" id="name-en" name="name_en" required 
                                       placeholder="Ministry of Example">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name-si">Service Name (Sinhala)</label>
                                <input type="text" id="name-si" name="name_si" 
                                       placeholder="උදාහරණ අමාත්‍යාංශය">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name-ta">Service Name (Tamil)</label>
                                <input type="text" id="name-ta" name="name_ta" 
                                       placeholder="உதாரண அமைச்சு">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <div class="section-header">
                            <h4>Subservices</h4>
                            <button type="button" id="add-subservice-btn" class="btn btn-small">+ Add Subservice</button>
                        </div>
                        
                        <div id="subservices-container">
                            <!-- Subservices will be dynamically added here -->
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="save-btn">Save Service</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="modal">
            <div class="modal-content small">
                <h3>Confirm Deletion</h3>
                <p>Are you sure you want to delete this service? This action cannot be undone.</p>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-delete-btn">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-btn">Delete</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/manage.js"></script>
</body>
</html>